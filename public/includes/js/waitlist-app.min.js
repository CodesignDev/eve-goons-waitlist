/*
* @Goon Incursion Waitlist
* @author: Samuel Grant
* @repo: https://github.com/makeshift/eve-goons-waitlist
*
* @includes packages: birdAlert, front
*/
function BirdAlert(i){"use strict";var o=this,e={clickToHide:!0,closeButton:!0,autoHide:!0,duration:3e4,showAnimation:"flipInX",hideAnimation:"flipOutX",inverseInsert:!1,preventDuplicate:!1,position:"top right",quantity:7,agroup:!0,width:400,zIndex:1e3,onShow:function(){},onHide:function(){}},t={"top left":{top:"90px",left:"10px",bottom:"auto",right:"auto"},"top center":{top:"90px",left:"50%",bottom:"auto",right:"auto"},"top right":{top:"90px",left:"auto",bottom:"auto",right:"10px"},"bottom left":{top:"auto",left:"10px",bottom:"10px",right:"auto"},"bottom center":{top:"auto",left:"50%",bottom:"10px",right:"0"},"bottom right":{top:"auto",left:"auto",bottom:"10px",right:"10px"}};this.element=[],this.notify=function(e){var t=!1;if(i.preventDuplicate&&o.element.find(".container-birdAlert").each(function(){$(this).find(".content-birdAlert").html()==e.msg&&$(this).hasClass(e.className)&&(t=!0)}),t)return!1;var n=$('<div class="container-birdAlert animated '+i.showAnimation+" "+(e.className||"")+'">'+(i.closeButton?'  <i class="close-birdAlert">+</i>':"")+(e.title?'  <div class="title-birdAlert">'+e.title+"</div>":"")+'  <div class="content-birdAlert">'+e.msg+"</div></div>");-1!=i.position.search("top")?(i.inverseInsert?o.element.append(n):o.element.prepend(n),i.agroup?o.element.find(".container-birdAlert").length>i.quantity&&o.element.find(".container-birdAlert:last").remove():2<=o.element.find(".container-birdAlert").length&&o.element.find(".container-birdAlert:last").remove()):(i.inverseInsert?o.element.append(n):o.element.prepend(n),i.agroup?o.element.find(".container-birdAlert").length>i.quantity&&o.element.find(".container-birdAlert:first").remove():2<=o.element.find(".container-birdAlert").length&&o.element.find(".container-birdAlert:first").remove()),i.autoHide&&setTimeout(function(){a(n)},i.duration),i.clickToHide?n.on("click",function(){a($(this))}):i.closeButton&&n.find(".close-birdAlert").on("click",function(){a(n)}),i.onShow()};var a=function(e){e.removeClass(i.showAnimation).addClass(i.hideAnimation),e.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){i.onHide(),e.remove()})};this.setDefaults=function(){i=$.extend({},i,e,"object"==typeof e&&e),o.element.css(t[i.position]),o.element.css({width:i.width+"px"}),"top center"==i.position||"bottom center"==i.position?o.element.css({"margin-left":"-"+i.width/2+"px"}):o.element.css({"margin-left":"0"}),o.element.css({"z-index":i.zIndex})},this.set=function(e){i=$.extend({},i,e,"object"==typeof e&&e),o.element.css(t[i.position]),o.element.css({width:i.width+"px"}),"top center"==i.position||"bottom center"==i.position?o.element.css({"margin-left":"-"+i.width/2+"px"}):o.element.css({"margin-left":"0"}),o.element.css({"z-index":i.zIndex})},i=$.extend({},e,i,"object"==typeof i&&i),o.element=$('<div class="birdAlert" style="position: fixed;"></div>'),$("body").append(o.element),o.element.css(t[i.position]),o.element.css({width:i.width+"px"}),"top center"==i.position||"bottom center"==i.position?o.element.css({"margin-left":"-"+i.width/2+"px"}):o.element.css({"margin-left":"0"}),o.element.css({"z-index":i.zIndex})}function showInfo(e){$.ajax({type:"POST",url:"/esi/ui/info/"+e})}function setWaypoint(e){$.ajax({type:"POST",url:"/esi/ui/waypoint/"+e})}function openMarket(e){$.ajax({type:"POST",url:"/esi/ui/market/"+e})}function openSearch(){document.getElementById("pilotSearchOverlay").style.display="block",$(".navbar").attr("style","display: none !important;"),$("#pilotSearchName").focus()}function closeSearch(){document.getElementById("pilotSearchOverlay").style.display="none",$(".navbar").removeAttr("style")}function hideBanner(e){$.ajax({type:"POST",url:"/internal-api/banner/:"+e}).done(function(){$("#topbanner").hide()}).fail(function(e){console.log(e.responseText)})}function sideNav(){$.ajax({type:"POST",url:"/internal-api/account/navbar"}).fail(function(e){console.log("Error updating side bar: "+e)})}function enableNotifications(){Notify.needsPermission&&Notify.isSupported()&&Notify.requestPermission(function(){$("#noNotify").hide(),null!==payloadData&&showNotification(payloadData)},function(){console.warn("Permission has been denied by the user")})}function showNotification(e){new Notify(e.data.appName,{body:e.data.message,icon:e.data.imgUrl,tag:e.data.target.id,timeout:30,notifyClick:function(){window.location.assign(e.data.comms.url)},notifyShow:function(){new Audio(e.data.sound).play()}}).show()}$(document).ready(function(){$("#searchForm").submit(function(e){e.preventDefault(),$.ajax({type:"POST",url:"/search",data:$("#searchForm").serialize()}).done(function(e){e.url&&window.location.assign(e.url)}).fail(function(e){$("#pilotSearchName").val("").attr("placeholder",e.responseText).focus(),$("#searchButton").empty().append('<i class="fa fa-search"></i>')})})}),$(document).ready(function(){$("#bannerMessage").submit(function(e){e.preventDefault()})}),$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip()}),$(document).ready(function(){if(Notify.needsPermission&&Notify.isSupported()){'<i class="fas fa-bell-slash"></i> Notifications disabled: this means you may miss your invite. Click <span style="text-decoration:underline" onclick="enableNotifications()">HERE</span> to enable them.',"</div>",$("#alertarea").prepend('<div role="alert" id="noNotify" class="alert alert-primary global-banner-inactive"><i class="fas fa-bell-slash"></i> Notifications disabled: this means you may miss your invite. Click <span style="text-decoration:underline" onclick="enableNotifications()">HERE</span> to enable them.</div>')}}),$(function(){if($("input.input-material").on("focus",function(){$(this).siblings(".label-material").addClass("active")}),$("input.input-material").on("blur",function(){$(this).siblings(".label-material").removeClass("active"),""!==$(this).val()?$(this).siblings(".label-material").addClass("active"):$(this).siblings(".label-material").removeClass("active")}),$(".dropdown").on("show.bs.dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).fadeIn(100).addClass("active")}),$(".dropdown").on("hide.bs.dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).fadeOut(100).removeClass("active")}),$(".search-open").on("click",function(e){e.preventDefault(),$(".search-panel").fadeIn(100)}),$(".search-panel .close-btn").on("click",function(){$(".search-panel").fadeOut(100)}),$(".sidebar-toggle").on("click",function(){$(this).toggleClass("active"),$("#sidebar").toggleClass("shrinked"),$(".page-content").toggleClass("active"),$(".sidebar-toggle").hasClass("active")?($(".navbar-brand .brand-sm").addClass("visible"),$(".navbar-brand .brand-big").removeClass("visible"),$(this).find("i").attr("class","fa fa-long-arrow-right")):($(".navbar-brand .brand-sm").removeClass("visible"),$(".navbar-brand .brand-big").addClass("visible"),$(this).find("i").attr("class","fa fa-long-arrow-left"))}),0<$("#style-switch").length){var e=$("link#theme-stylesheet");$("<link id='new-stylesheet' rel='stylesheet'>").insertAfter(e);var t=$("link#new-stylesheet");$.cookie("theme_csspath")&&t.attr("href",$.cookie("theme_csspath")),$("#colour").change(function(){if(""!==$(this).val()){var e="css/style."+$(this).val()+".css";t.attr("href",e),$.cookie("theme_csspath",e,{expires:365,path:document.URL.substr(0,document.URL.lastIndexOf("/"))})}return!1})}});